<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Registro</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
      <div class="container" style="margin-top: 5%;border-radius:10px;">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Registro</h5>
          </div>
          <div class="modal-body">
            <!-- <form action="/logup" method="post"> -->
              <div class="form-group">
                  <label for="accountNumber">*Número de cuenta: </label>
                  <input type="text" class="form-control" id="accountNumberUp" />
              </div>
              <div class="form-group">
                  <label for="userName"  class="col-form-label">*Nombre de usuario: </label>
                  <input type="text" class="form-control" id="userName" />
              </div>
              <div class="form-group">
                  <label for="password"  class="col-form-label">*Contraseña: </label>
                  <input type="password" class="form-control" id="pass" />
                  <label for="password2"  class="col-form-label">*Confirmar contraseña: </label>
                  <input type="password" class="form-control" id="pass2" />
              </div>
              <div class="form-group">
                  <label for="description"  class="col-form-label">Descripción: </label>
                  <textarea class="form-control" id="description" placeholder="Me gustan las mates y los perros"></textarea>
              </div>
              *Campos obligarotios
              <div class="modal-footer">
                <button class="btn btn-primary" id="Registrarse">Registrarse</button>
              </div>
          <!-- </form> -->
          </div>
        </div>
      </div>
  </body>
  <script>
  $("#Registrarse").on("click",()=>{
    let i = 0;
    let form = ["accountNumberUp", "userName", "pass", "pass2"];
    for (var ele of form)
      if ($("#" + ele).val() != "")
        i++;

    if (i == 4)
      if ($("#pass").val() == $("#pass2").val()) {
        $.ajax({
          url: "/logup",
          method: "post",
          data: {
            userName : $("#userName").val(),
            accountNumber : $("#accountNumberUp").val(),
            pass : $("#pass").val(),
            description : $("#description").val()
          },
        }).done(function(data){
          if (data == "error"){
            swal({
              title: "Ocurrió un error y no te hemos podido registrar): Asegúrate de ingresar datos válidos",
              icon: "error"
            });
          }
          else
            window.location = "/login"

        });
      }
      else
        swal({
          title: "Las contraseñas no coinciden ",
          icon: "error"
        });

    else
      swal({
        title: "Épale ",
        text: "Necesitas llenar los campos obligatorios",
        icon: "error",
        button: "OK",
      });

  });
  </script>
</html>
